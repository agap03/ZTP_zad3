<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Python: module data_loader</title>
</head><body>

<table class="heading">
<tr class="heading-text decor">
<td class="title">&nbsp;<br><strong class="title">data_loader</strong></td>
<td class="extra"><a href=".">index</a><br><a href="file:/Users/olcia/Documents/ZTP_repo/ZTP_zad3/data_loader.py">/Users/olcia/Documents/ZTP_repo/ZTP_zad3/data_loader.py</a></td></tr></table>
    <p></p>
<p>
<table class="section">
<tr class="decor pkg-content-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Modules</strong></td></tr>
    
<tr><td class="decor pkg-content-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><table><tr><td class="multicolumn"><a href="calendar.html">calendar</a><br>
<a href="io.html">io</a><br>
</td><td class="multicolumn"><a href="os.html">os</a><br>
<a href="pandas.html">pandas</a><br>
</td><td class="multicolumn"><a href="re.html">re</a><br>
<a href="requests.html">requests</a><br>
</td><td class="multicolumn"><a href="zipfile.html">zipfile</a><br>
</td></tr></table></td></tr></table><p>
<table class="section">
<tr class="decor functions-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Functions</strong></td></tr>
    
<tr><td class="decor functions-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt><a name="-correct_datetime_index"><strong>correct_datetime_index</strong></a>(df_dict)</dt><dd><span class="code">Funkcja&nbsp;koryguje&nbsp;indeks&nbsp;czasu,&nbsp;przesuwając&nbsp;rekordy&nbsp;z&nbsp;godziny&nbsp;00:00:00&nbsp;na&nbsp;23:59:59&nbsp;poprzedniego&nbsp;dnia.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;df_dict&nbsp;(dict):&nbsp;Słownik&nbsp;ramek&nbsp;danych&nbsp;z&nbsp;DatetimeIndex&nbsp;zmapowanych&nbsp;do&nbsp;analizowanych&nbsp;lat.<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;dict:&nbsp;Słownik&nbsp;z&nbsp;poprawionymi&nbsp;indeksami&nbsp;czasowymi.</span></dd></dl>
 <dl><dt><a name="-create_code_map"><strong>create_code_map</strong></a>(gios_metadata, df_dict)</dt><dd><span class="code">Mapuje&nbsp;nowe&nbsp;kody&nbsp;stacji&nbsp;do&nbsp;starych&nbsp;i&nbsp;aktualizuje&nbsp;nazwy&nbsp;kolumn&nbsp;w&nbsp;ramkach&nbsp;danych.<br>
&nbsp;<br>
Dba&nbsp;o&nbsp;spójność&nbsp;identyfikatorów&nbsp;stacji&nbsp;w&nbsp;przypadku&nbsp;zmian&nbsp;nazewnictwa&nbsp;na&nbsp;przestrzeni&nbsp;lat.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;gios_metadata&nbsp;(pd.DataFrame):&nbsp;Tabela&nbsp;metadanych&nbsp;zawierająca&nbsp;kolumny&nbsp;z&nbsp;kodami.<br>
&nbsp;&nbsp;&nbsp;&nbsp;df_dict&nbsp;(dict):&nbsp;Słownik&nbsp;mapujący&nbsp;oczyszczone&nbsp;i&nbsp;ujednolicone&nbsp;ramki&nbsp;danych&nbsp;do&nbsp;analizowanych&nbsp;lat<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;dict:&nbsp;Zaktualizowany&nbsp;słownik&nbsp;z&nbsp;ujednoliconymi&nbsp;nazwami&nbsp;stacji&nbsp;w&nbsp;ramkach&nbsp;danych.</span></dd></dl>
 <dl><dt><a name="-download_gios_archive"><strong>download_gios_archive</strong></a>(year, gios_id, filename, gios_archive_url)</dt><dd><span class="code">Funkcja&nbsp;pobiera&nbsp;archiwum&nbsp;ZIP&nbsp;dla&nbsp;podanego&nbsp;roku&nbsp;z&nbsp;GIOŚ,&nbsp;rozpakowuje&nbsp;je&nbsp;w&nbsp;pamięci&nbsp;i&nbsp;wczytuje&nbsp;arkusz&nbsp;Excel.&nbsp;<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;year&nbsp;(list[int]):&nbsp;rok&nbsp;dla&nbsp;którgo&nbsp;pobierane&nbsp;są&nbsp;dane<br>
&nbsp;&nbsp;&nbsp;&nbsp;gios_id&nbsp;(str):&nbsp;id&nbsp;zaspobu&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;filename&nbsp;(str):&nbsp;nazwa&nbsp;pliku&nbsp;(.xlsx)&nbsp;wewnątrz&nbsp;pobranego&nbsp;archiwum&nbsp;ZIP.<br>
&nbsp;&nbsp;&nbsp;&nbsp;gios_archive_url&nbsp;(str):&nbsp;bazowy&nbsp;adres&nbsp;URL&nbsp;punktu&nbsp;końcowego&nbsp;archiwum&nbsp;GIOŚ<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;pd.DataFrame:&nbsp;ramka&nbsp;danych&nbsp;z&nbsp;pomiarami&nbsp;godzinowymi&nbsp;wartości&nbsp;PM2.5&nbsp;dla&nbsp;danego&nbsp;roku<br>
&nbsp;&nbsp;&nbsp;&nbsp;lub&nbsp;None&nbsp;w&nbsp;przypadku&nbsp;błedu&nbsp;<br>
&nbsp;<br>
Rises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;requests.exceptions.HTTPError:&nbsp;Jeśli&nbsp;wystąpi&nbsp;problem&nbsp;z&nbsp;połączeniem&nbsp;lub&nbsp;zasób&nbsp;nie&nbsp;istnieje.</span></dd></dl>
 <dl><dt><a name="-download_gios_metadata"><strong>download_gios_metadata</strong></a>(url)</dt><dd><span class="code">Funkcja&nbsp;pobiera&nbsp;plik&nbsp;Excel&nbsp;z&nbsp;metadanymi&nbsp;stacji&nbsp;pomiarowych&nbsp;(lokalizacje,&nbsp;kody)<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;(str):&nbsp;Adres&nbsp;URL&nbsp;do&nbsp;pliku&nbsp;Excel&nbsp;z&nbsp;metadanymi.<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;pd.DataFrame:&nbsp;Ramka&nbsp;danych&nbsp;z&nbsp;metadanymi&nbsp;lub&nbsp;None&nbsp;w&nbsp;przypadku&nbsp;błędu.<br>
&nbsp;<br>
Rises:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;requests.exceptions.HTTPError:&nbsp;Jeśli&nbsp;wystąpi&nbsp;problem&nbsp;z&nbsp;połączeniem&nbsp;lub&nbsp;zasób&nbsp;nie&nbsp;istnieje.</span></dd></dl>
 <dl><dt><a name="-download_multiple_gios_archives"><strong>download_multiple_gios_archives</strong></a>(years, gios_ids, filenames, gios_archive_url=None)</dt><dd><span class="code">Jest&nbsp;to&nbsp;funkcja&nbsp;nadrzędna,&nbsp;która&nbsp;zarządza&nbsp;procesem&nbsp;wczytywania&nbsp;danych&nbsp;dla&nbsp;wielu&nbsp;lat.<br>
&nbsp;<br>
Args:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;years&nbsp;(list[int]):&nbsp;Lista&nbsp;lat&nbsp;do&nbsp;pobrania<br>
&nbsp;&nbsp;&nbsp;&nbsp;gios_id&nbsp;(dict):&nbsp;Słownik&nbsp;przypisujący&nbsp;identyfikator&nbsp;pliku&nbsp;w&nbsp;bazie&nbsp;GIOŚ&nbsp;(wartość)&nbsp;do&nbsp;roku&nbsp;(klucz)<br>
&nbsp;&nbsp;&nbsp;&nbsp;file_names&nbsp;(dict):&nbsp;Słownik&nbsp;przypisujący&nbsp;nazwę&nbsp;pliku&nbsp;.xlsx&nbsp;(wartość)&nbsp;do&nbsp;roku&nbsp;(klucz)<br>
&nbsp;&nbsp;&nbsp;&nbsp;gios_archive_url&nbsp;(str,&nbsp;optional):&nbsp;Podstawowy&nbsp;adres&nbsp;URL&nbsp;API&nbsp;GIOŚ.&nbsp;Domyślna&nbsp;wartość&nbsp;to&nbsp;None<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;dict&nbsp;:&nbsp;Słownik&nbsp;mapujący&nbsp;ramki&nbsp;danych&nbsp;do&nbsp;każdego&nbsp;roku&nbsp;{rok:&nbsp;df}.</span></dd></dl>
 <dl><dt><a name="-edit_df"><strong>edit_df</strong></a>(df_dict)</dt><dd><span class="code">Funkcja&nbsp;usuwa&nbsp;niepotrzebne&nbsp;wiersze&nbsp;i&nbsp;ujednolica&nbsp;strukturę&nbsp;danych<br>
Proces&nbsp;obejmuje&nbsp;usuwanie&nbsp;wierszy&nbsp;opisowych,&nbsp;zaokrąglanie&nbsp;czasu&nbsp;do&nbsp;pełnych&nbsp;godzin&nbsp;(w&nbsp;dół)<br>
i&nbsp;ustawienie&nbsp;daty&nbsp;jako&nbsp;indeksu.&nbsp;<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;df_dict&nbsp;(dict):&nbsp;słownik&nbsp;mapujący&nbsp;surowe&nbsp;dane&nbsp;w&nbsp;ramkach&nbsp;danych&nbsp;do&nbsp;roku&nbsp;{rok:&nbsp;df}<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;dict&nbsp;:&nbsp;słownik&nbsp;mapujący&nbsp;ramki&nbsp;danych&nbsp;z&nbsp;oczyszczonymi&nbsp;danymi&nbsp;i&nbsp;DatetimeIndex&nbsp;do&nbsp;roku&nbsp;{rok:&nbsp;df}.</span></dd></dl>
 <dl><dt><a name="-multiindex_code_city"><strong>multiindex_code_city</strong></a>(df_dict, metadata)</dt><dd><span class="code">Funkcja&nbsp;tworzy&nbsp;MultiIndex&nbsp;kolumn&nbsp;łączący&nbsp;Miejscowość&nbsp;z&nbsp;Kodem&nbsp;stacji.<br>
&nbsp;<br>
Ułatwia&nbsp;czytelną&nbsp;analizę&nbsp;danych&nbsp;poprzez&nbsp;dodanie&nbsp;nazwy&nbsp;miasta&nbsp;nad&nbsp;kodem&nbsp;stacji.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;df_dict&nbsp;(dict):&nbsp;Słownik&nbsp;z&nbsp;ramkami&nbsp;danych&nbsp;zmapowanymi&nbsp;do&nbsp;analizowanych&nbsp;lat.<br>
&nbsp;&nbsp;&nbsp;&nbsp;metadata&nbsp;(pd.DataFrame):&nbsp;Metadane&nbsp;stacji&nbsp;(do&nbsp;powiązania&nbsp;kodu&nbsp;z&nbsp;miastem).<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;dict:&nbsp;Słownik&nbsp;ramek&nbsp;danych&nbsp;z&nbsp;MultiIndexem&nbsp;na&nbsp;kolumnach.</span></dd></dl>
 <dl><dt><a name="-save_combined_data"><strong>save_combined_data</strong></a>(df_dict, filename)</dt><dd><span class="code">Funkcja&nbsp;scala&nbsp;dany&nbsp;ze&nbsp;wszytskich&nbsp;lat&nbsp;w&nbsp;jednę&nbsp;ramkę&nbsp;danych&nbsp;i&nbsp;zapisuje&nbsp;ją&nbsp;do&nbsp;pliku&nbsp;CSV.<br>
Sprawdzą&nbsp;również&nbsp;czy&nbsp;liczba&nbsp;dni&nbsp;w&nbsp;kazdym&nbsp;roku&nbsp;jest&nbsp;prawidłowa.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;df_dict&nbsp;(dict):&nbsp;Słownik&nbsp;ramek&nbsp;danych&nbsp;do&nbsp;połączenia.<br>
&nbsp;&nbsp;&nbsp;&nbsp;filename&nbsp;(str):&nbsp;Nazwa&nbsp;docelowego&nbsp;pliku&nbsp;.csv<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;pd.DataFrame:&nbsp;Połączona&nbsp;ramka&nbsp;danych&nbsp;ze&nbsp;wszytkich&nbsp;lat.</span></dd></dl>
</td></tr></table>
</body></html>